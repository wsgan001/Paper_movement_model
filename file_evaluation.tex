\section{Model Verification}
\label{section_model_varification}

\begin{table*}[!t]
\caption{Simulation Parameter}
\centering
\begin{tabular}{r|c|c|c|c}
\hline
type & Trace & START & SP & RWP \\
\hline
mobility model & External & START & ShortestPathMapBased & RandomWaypoint\\
\hline
simulation time (sec) & \multicolumn{4}{c}{7200}\\ 
\hline
node scale &\multicolumn{4}{c}{1000/3000}\\
\hline
contact range (meter) & \multicolumn{4}{c}{200} \\
\hline
\multirow{3}{2.5cm}{speed range (m/s)} &\multirow{3}{1cm}{-}&\multirow{3}{1cm}{-}& \multicolumn{2}{c}{[0,16.67],} \\
 & & & \multicolumn{2}{c}{[0,22.22]} \\
 & & & \multicolumn{2}{c}{[0,33.33]} \\
\hline
\multirow{4}{1.5cm}{external file} & traces of 1000 nodes from 6:00 to 8:00 in Nov.8th,2011  &\multirow{4}{1cm}{-} &\multirow{4}{1cm}{-} &\multirow{4}{1cm}{-} \\
 &traces of 3000 nodes from 11:00 to 13:00 in Nov.8th,2011& & & \\
 &traces of 3000 nodes from 17:00 to 19:00 in Nov.8th,2011& & & \\
 &traces of 3000 nodes from 22:00 to 24:00 in Nov.8th,2011& & & \\
\hline
map file &-&\multicolumn{2}{c|}{Beijing Map}&- \\
\hline
\end{tabular}\label{table_simulation_parameters}
\end{table*}

In this section, START mobility model is validated on the aspects of node distribution and contact characteristics compared with existing mobility models and the real traces. We pick two simple mobility models for comparison: one free space - Random Way Point (RWP) model, the other is constrained model, Shortest Path (SP).  SP mobility model is based on the underlying map of Beijing where vehicles move along the map roads by Dijkstra algorithm to random destinations. Both models take no consideration of the node statuses and geographical distributions. All mobility models are implemented on Opportunistic Networking Environment (ONE)\cite{KeranenOtt-155}.

In our simulations, vehicles are deployed in an area of $24,000\times 24,000 m^2$, including fourth ring roads in Beijing. The speed range of RWP and SP need to be configured.
To ensure the accuracy, we choose three different speed ranges $[0,16.67]m/s$, $[0,33.3]m/s$ and $[0,22.2]m/s$ (the upper bounds of speed match the speed limits $80$,$120$,$60$ $km/h$. The parameters for the simulations are shown as\ref{table_simulation_parameters}.
%%may be in the morning should be changed
To evaluate the time feature of START, 4 time periods are chosen: in the morning from 6:00:00 to 7:59:59, at noon from 11:00 to 13:00, at afternoon from 17:00 to 19:00 and lat in the evening from 22:00 to 24:00. Accordingly, we extract the real traces at corresponding time period of 21st November 2011. Because the taxi quantity is much small in the morning, traces of 1000 taxies are extracted, while for the other three time period, traces of 3000 taxies are randomly selected. 


\subsection{Traces and Node Distributions}

\begin{figure*}[!t]
\centering
\subfigure[Real Trace]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/sample/real_traces.eps}}
\subfigure[START]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/sample/start_traces.eps}}
\subfigure[SP]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/sample/sp_traces.eps}}
\subfigure[RWP]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/sample/rwp_traces.eps}}
\caption{Trace samples.}\label{figure_tracesample}
\end{figure*}

\begin{figure*}[!t]
\centering
\subfigure[Real Trace]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/trace_nodedis.eps}}
\subfigure[START]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/start_nodedis.eps}}
\subfigure[SP]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/sp_nodedis.eps}}
\subfigure[RWP]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/rwp_nodedis.eps}}
\caption{Nodes distribution snapshots.}\label{figure_trace_snapshots}
\end{figure*}

Trace samples and their node distribution snapshots from different mobility models are reported in Fig.~\ref{figure_tracesample} and Fig~\ref{figure_trace_snapshots}. Fig.~\ref{figure_tracesample} shows the trace in one day. The traces of the real data and START only cover some parts of the area, while the traces of SP and RWP almost go through the whole area. Recall that SP and RWP select a destination randomly in the area, while START takes the associations between current region and destinations into consideration (which satisfies the movement rules of taxis). In Fig.~\ref{figure_trace_snapshots}, real trace, START and SP exhibit the road structures, while the node distribution of RWP is much uniform. As to START, the destination section process decides that it tends to select a destination in the regions with higher load/drop event probability. Therefore, with the decline of the randomness, the snapshot of START becomes much clear and centralized on the main roads, which matches real traces very well.

Since the node distribution has a great impact on the transport and network performance, a good understanding of it can help to route and control.  However, nodes are dynamic leading to a dynamic node distribution. In order to quantify the changing node distribution,  we introduce the in/out degree. The in/out degree figures out how many taxies moving in or out from a region in a time period. In/out degree defines how many nodes moveing in or out a area during a period of time. 
We divide the simulation scenario into grids of $ 400m \times 400 m$ to investigate the in/out degree, and the time period to measure the in/out degree is as two hours according to the simulation time. 

Firstly, we compare the in/out degrees of different days at same time period. From figure XXX and XXX, we can find the relative error with their average in/out degree is less than XXX. This suggests     that the in/out degree for multiple days are consistent and we can compare our START traces with it.

Figure XXX demonstrates the in degree of START, SP, RWP and the average in degree distribution. The relative error of START compared with the average one is XXX, that of SP is XXX,  and RWP is XXX.
\begin{table*}[!t]
\caption{Average in/out degree.}
\centering
\begin{tabular}{r|c|c|c|c|c|c|c|c}
\hline
	&trace	&start	&rwp-16.67	&rwp-22.22	&rwp-33.33	&sp-16.67	&sp-22.22	&sp-33.33\\
\hline
6:00	&31.851667	&23.684444	&31.631667	&38.600556	&51.671389	&30.357222	&37.976667	&52.748611\\
\hline
11:00	&85.048333	&70.411389	&94.957500	&114.665278	&152.116389	&91.222500	&115.361111	&157.210278\\
\hline
17:00	&84.095556	&71.304444	&94.957500	&114.665278	&152.116389	&91.222500	&115.361111	&157.210278\\
\hline
22:00	&79.547778	&68.977778	&94.957500	&114.665278	&152.116389	&91.222500	&115.361111	&157.210278\\
\hline
\end{tabular}
\end{table*}
%%计算方差


\begin{figure*}[!t]
\centering
\begin{tabular}[c]{cc}
\epsfysize=2in\epsfbox{figures_201103/Evaluation/indegree/rwp_16_1000.eps}&
\epsfysize=2in\epsfbox{figures_201103/Evaluation/indegree/rwp_16_3000.eps} \\
\end{tabular}
\caption{The in degree of RWP}
\end{figure*}


\begin{figure*}[!t]
\centering
\begin{tabular}
[c]{ccc}
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/trace_6_1000.eps} &
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/start_6_1000.eps} &
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/sp_16_1000.eps}\\ 
(a) Real traces of 1000 nodes, 6:00-8:00  & (b) START:1000 nodes, 6:00-8:00 & (c) SP:1000 nodes ,[0,16.67]$m/s$ \\ 
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/trace_11_3000.eps} & 
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/start_11_3000.eps} &
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/sp_16_3000.eps} \\
(d) Real traces of 3000 nodes,11:00-13:00   &(e) START:3000 nodes,11:00-13:00   &(f) SP:3000 nodes ,[0,16.67]$m/s$ \\ 

\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/trace_17_3000.eps} & 
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/start_22_3000.eps} &
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/sp_16_3000.eps} \\
(g) Real traces of 3000 nodes, 17:00-19:00   &(h) START: 3000 nodes, 17:00-19:00 &(i) SP:3000 nodes ,[0,16.67]$m/s$ \\ 

\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/trace_22_3000.eps} & 
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/start_22_3000.eps} &
\epsfysize=1.2in\epsfbox{figures_201103/Evaluation/indegree/sp_16_3000.eps} \\
(j) Real traces of 3000 nodes, 22:00-24:00 &(k) START:3000  nodes,22:00-24:00 &(l) SP:3000  nodes ,[0,16.67]$m/s$ \\ 

\end{tabular}
\end{figure*}


\subsection{Contacts Characteristics}

\begin{figure*}[!t]
\centering
\subfigure[1000 nodes from 6:00 to 8:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ct1000_6.eps}}
\subfigure[3000 nodes from 11:00 to 13:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ct3000_11.eps}}
\subfigure[3000 nodes from 17:00 to 19:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ct3000_17.eps}}
\subfigure[3000 nodes from 22:00 to 24:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ct3000_22.eps}}
\caption{Contact times distribution}\label{figure_contact_ct}
\end{figure*}

\begin{figure*}[!t]
\centering
\subfigure[1000 nodes from 6:00 to 8:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ict1000_6.eps}}
\subfigure[3000 nodes from 11:00 to 13:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ict3000_11.eps}}
\subfigure[3000 nodes from 17:00 to 19:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ict3000_17.eps}}
\subfigure[3000 nodes from 22:00 to 24:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/ict3000_22.eps}}
\caption{Inter-contact times distribution }\label{figure_contact_ict}
\end{figure*}

\begin{figure*}[!t]
\centering
\subfigure[1000 nodes from 6:00 to 8:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/tc1000_6.eps}}
\subfigure[3000 nodes from 11:00 to 13:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/tc3000_11.eps}}
\subfigure[3000 nodes from 17:00 to 19:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/tc3000_17.eps}}
\subfigure[3000 nodes from 22:00 to 24:00]{\includegraphics[width=0.24\textwidth]{figures_201103/Evaluation/contact/tc3000_22.eps}}
\caption{Time vs. total contact time.}\label{figure_contact_ct}
\end{figure*}


Contact defines an opportunity to communicate, a contact range should be assigned to quantify the max distance we consider two nodes contact with each other. 
In our simulations, the transmit ranges of high-speed interfaces and blue tooth interface are both set to $200m$ for potential contacts. 

The contact time and inter contact time among vehicles are also evaluated as the indicators to validate the similarity.
Fig. \ref{figure_contact_ct} and fig. \ref{figure_contact_ict} reports the contact time and inter-contact distributions, which shows the probability of the contact or inter-contact time smaller than certain time length. To substantiate, a point $(25,0.5)$ in the plots means the probability is $0.5$ when contact or inter-contact time is shorter than $25s$. 
%Clearly, START matches the real traces best among three mobility models.
From fig. \ref{figure_contact_ct} the speed will effect the contact distribution of SP and RWP. The speed in a low speed range will makes the contact time distribution of SP and RWP approach that of real traces. For START, in the time from 17:00 to 19:00, the model matches with the real traces best. 
Fig. \ref{figure_contact_ict} also show the sum of contact time regarding to the simulation time.
For the inter contact time, the curves of SP (RWP) are close with each other, which means the speed range dose not make much difference on the inter contact time. Compared with the distribution of contact time, it may because that the inter contact time are much longer than the contact time, the inter contact time is more stable to present the performance of nodes. 
In Fig. \ref{figure_total_contact_time}(a), the three purple lines of SP and the three blue lines of RWP are overlapping with each other, too.
The curves of the total contact time vs. time present a liner law. 
From the analysis above, for SP and RWP, the differences of speed ranges show little influence on these curves. 
%Clearly, the rank of the contact characteristic similarity with the real data is START $>$ SP $>$ RWP. 

To conclude, by comparing the node distribution and contact characteristics, the evaluation results confirm that START mobility model achieves great similarities with the real data. START takes the usage of speed and geographic features related with taxi status, while SP employs the map information and RWP is a random model taking use of no realistic data.

