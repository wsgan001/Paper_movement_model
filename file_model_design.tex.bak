\subsection{Modeling process}
\label{section_design}
START is modeling in both microscopic and macroscopic aspect.
In the microscopic aspect, we model the taxi speed and duration for status 0 and 1 respectively. During the period for status 0(or 1), nodes's speed will follow the speed distribution of status 0(or 1) and stay in this status for a certain time, which will be assigned by the distribution of lasting time for status 0(or 1). In this case, we abstract the different taxi behavior of the two state.

In the macroscopic aspect, researchers \cite{HuangZhang-105} have explored the travel pattern from one region to another.
In that case, we can assign the travel origination, path and destination based on the regularity instead of assign them  randomly. Instead of simply dividing areas into $n*m$ cells. In this work, we think taxi drivers prefers to go to some hot regions, such as train station or film theaters.
So we divide whole area into cells and define taxi dense areas and sparse area as follows:

We define following concepts:
\begin{description}
  \item[Cell] the area is divided into m*n grids, which can be notated as $(x, y, length_{left},length_{top}, length_{right}, length_{bottom});0 \leqq x <m,0 \leqq y < n$. $x$ and $y$ are the index of cells.
  \item[Region] We define region as a collection of cells,that is $\{cell\}$.
  \item[Event density for event 1] event density is the number of event 1 happened in certain cell during a period.
  \item[Event density threshold] to define "higher event density", a threshold is set. A cell is with higher event density, if the event density is higher than the threshold.
  \item[Dense region]   Cell sequence adjacent with each other and event density in them is higher than the event density threshold.
  \item[Sparse region]  other cells expect for the cells in dense regions.

\end{description}

As a taxi's trace can be regarded as a Markov process, the One-step transition probability matrix between regions is calculated. A trace can be defined as a collection of path $\{path_i\}$, while $path_i=(<c^i_0, c^i_1, c^i_2,..., c^i_{dest}>, speed_i)$, $c$ means a coordinate,$(x,y)$.
For each node, a initial position will be assigned in recognized dense region. $path_i$ will set $c^i_0$ as its current position and then determine the $c^i_{dest}$ by the area transition probability, to which the node distribution will conform. A node move from $c^i_j$ to $c^i_{j+1}$ by choosing an adjacent cell, defined in section \ref{section_design}, with highest area transition probability. After a path is found, node will move towards the destination along the path.

For every path, a speed will randomly assigned by the speed distribution for its status. Specially, if a node cannot reach the destination in its current status duration time, the path will be divide into some sub-pathes with specific speed values. Status duration is also randomly generated following the corresponding status duration distribution.

With the transition probability matrix, the macroscopic movement of nodes can be developed. 